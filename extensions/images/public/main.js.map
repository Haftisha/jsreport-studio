{"version":3,"sources":["webpack:///webpack/bootstrap 6e4cebb8ed6712720058","webpack:///./main_dev.js","webpack:///./ImageEditor.js","webpack:///external \"Studio.runtime['core-js/object/get-prototype-of']\"","webpack:///external \"Studio.runtime['helpers/classCallCheck']\"","webpack:///external \"Studio.runtime['helpers/createClass']\"","webpack:///external \"Studio.runtime['helpers/possibleConstructorReturn']\"","webpack:///external \"Studio.runtime['helpers/inherits']\"","webpack:///external \"Studio.libraries['react']\"","webpack:///./ImageUploadButton.js","webpack:///external \"Studio.runtime['regenerator']\"","webpack:///external \"Studio.runtime['core-js/object/assign']\"","webpack:///external \"Studio.runtime['helpers/asyncToGenerator']\"","webpack:///external \"Studio.libraries['superagent']\"","webpack:///external \"Studio\""],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6e4cebb8ed6712720058\n **/","import ImageEditor from './ImageEditor.js'\nimport ImageUploadButton from './ImageUploadButton.js'\nimport Studio from 'jsreport-studio'\n\nStudio.addEntitySet({ name: 'images', faIcon: 'fa-camera', visibleName: 'image', onNew: ImageUploadButton.OpenUpload })\nStudio.addEditorComponent('images', ImageEditor)\nStudio.addToolbarComponent(ImageUploadButton)\n\n\n\n/** WEBPACK FOOTER **\n ** ./main_dev.js\n **/","import React, { Component } from 'react'\r\n\r\nexport default class ImageEditor extends Component {\r\n  static propTypes = {\r\n    entity: React.PropTypes.object.isRequired\r\n  }\r\n\r\n  render () {\r\n    const { entity } = this.props\r\n\r\n    return (<div className='custom-editor'>\r\n      <div><h1><i className='fa fa-camera' /> {entity.name}</h1></div>\r\n      <div>\r\n        <div>Embed into template using:\r\n          <code>\r\n            <h2>\r\n              &lt;img src='{'{#image ' + entity.name + \"}'\"}/&gt;\r\n            </h2>\r\n          </code>\r\n        </div>\r\n      </div>\r\n      <div style={{overflow: 'auto'}}>\r\n        <img src={'data:image/png;base64,' + entity.content} style={{display: 'block', margin: '3rem auto'}}/>\r\n      </div>\r\n    </div>)\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ImageEditor.js\n **/","module.exports = Studio.runtime['core-js/object/get-prototype-of'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['core-js/object/get-prototype-of']\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/classCallCheck'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/classCallCheck']\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/createClass'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/createClass']\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/possibleConstructorReturn'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/possibleConstructorReturn']\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/inherits'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/inherits']\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 7\n ** module chunks = 0\n **/","import React, { Component } from 'react'\r\nimport superagent from 'superagent'\r\nimport Studio from 'jsreport-studio'\r\n\r\nlet _imageUploadButton\r\n\r\nexport default class ImageUploadButton extends Component {\r\n  static propTypes = {\r\n    tab: React.PropTypes.object,\r\n    onUpdate: React.PropTypes.func.isRequired\r\n  }\r\n\r\n  // we need to have global action in main_dev which is triggered when users clicks on + on images\r\n  // this triggers invisible button in the toolbar\r\n  static OpenUpload () {\r\n    _imageUploadButton.openFileDialog(true)\r\n  }\r\n\r\n  componentDidMount () {\r\n    _imageUploadButton = this\r\n  }\r\n\r\n  upload (e) {\r\n    if (!e.target.files.length) {\r\n      return\r\n    }\r\n\r\n    const file = e.target.files[0]\r\n    const reader = new FileReader()\r\n\r\n    reader.onloadend = async () => {\r\n      // playground/workspaces extension needs to save the new version\r\n      // so uploading of the new image goes into it\r\n      if (Studio.workspaces) {\r\n        await Studio.workspaces.save()\r\n      }\r\n\r\n      if (this.forNew) {\r\n        const response = await Studio.api.post('/api/image', {\r\n          attach: { filename: 'file.png', file: file }\r\n        })\r\n\r\n        const entity = {\r\n          __entitySet: 'images',\r\n          _id: response._id,\r\n          name: response.name,\r\n          shortid: response.shortid\r\n        }\r\n\r\n        Studio.addExistingEntity(entity)\r\n        Studio.openTab(Object.assign({}, entity))\r\n      } else {\r\n        await Studio.api.post(`/api/image/${this.props.tab.entity.shortid}`, {\r\n          attach: { filename: 'file.png', file: file }\r\n        })\r\n\r\n        Studio.loadEntity(this.props.tab.entity._id, true)\r\n      }\r\n    }\r\n\r\n    reader.onerror = function () {\r\n      alert('There was an error reading the file!')\r\n    }\r\n\r\n    reader.readAsBinaryString(file)\r\n  }\r\n\r\n  openFileDialog (forNew) {\r\n    this.forNew = forNew\r\n\r\n    this.refs.file.dispatchEvent(new MouseEvent('click', {\r\n      'view': window,\r\n      'bubbles': false,\r\n      'cancelable': true\r\n    }))\r\n  }\r\n\r\n  renderUpload () {\r\n    return <input\r\n      type='file' key='file' ref='file' style={{display: 'none'}} onChange={(e) => this.upload(e)}\r\n      accept='image/*'></input>\r\n  }\r\n\r\n  render () {\r\n    if (!this.props.tab || !this.props.tab.entity || this.props.tab.entity.__entitySet !== 'images') {\r\n      return this.renderUpload(true)\r\n    }\r\n\r\n    return <div className='toolbar-button' onClick={() => { this.openFileDialog() }}>\r\n      <i className='fa fa-cloud-upload' />Upload\r\n      {this.renderUpload()}\r\n    </div>\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ImageUploadButton.js\n **/","module.exports = Studio.runtime['regenerator'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['regenerator']\"\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = Studio.runtime['core-js/object/assign'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['core-js/object/assign']\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/asyncToGenerator'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/asyncToGenerator']\"\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = Studio.libraries['superagent'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['superagent']\"\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 13\n ** module chunks = 0\n **/"],"sourceRoot":""}