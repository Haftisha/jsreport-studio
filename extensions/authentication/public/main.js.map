{"version":3,"sources":["webpack:///webpack/bootstrap 529a5d6f89235a7c0572","webpack:///./main_dev.js","webpack:///external \"Studio.runtime['regenerator']\"","webpack:///external \"Studio.runtime['helpers/asyncToGenerator']\"","webpack:///./UserEditor.js","webpack:///external \"Studio.runtime['core-js/object/get-prototype-of']\"","webpack:///external \"Studio.runtime['helpers/classCallCheck']\"","webpack:///external \"Studio.runtime['helpers/createClass']\"","webpack:///external \"Studio.runtime['helpers/possibleConstructorReturn']\"","webpack:///external \"Studio.runtime['helpers/inherits']\"","webpack:///external \"Studio.libraries['react']\"","webpack:///./ChangePasswordModal.js","webpack:///external \"Studio\"","webpack:///./LogoutSettingsButton.js","webpack:///./ChangePasswordSettingsButton.js","webpack:///./ChangePasswordButton.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 529a5d6f89235a7c0572\n **/","import UserEditor from './UserEditor.js'\nimport LogoutSettingsButton from './LogoutSettingsButton.js'\nimport ChangePasswordSettingsButton from './ChangePasswordSettingsButton.js'\nimport ChangePasswordButton from './ChangePasswordButton.js'\nimport Studio from 'jsreport-studio'\n\n// we want to be at the front, because other extension like scheduling relies on loaded user\nStudio.initializeListeners.unshift(async () => {\n  const response = await Studio.api.get('/api/settings')\n\n  if (!response.tenant) {\n    // authentication not enabled in config\n    return\n  }\n\n  Studio.authentication = { user: response.tenant }\n\n  if (Studio.authentication.user.isAdmin) {\n    Studio.addEntitySet({\n      name: 'users',\n      faIcon: 'fa-user',\n      visibleName: 'user',\n      nameAttribute: 'username',\n      onNew: () => Studio.openModal('NEW_USER_MODAL')\n    })\n    Studio.addEditorComponent('users', UserEditor)\n    Studio.addToolbarComponent(ChangePasswordButton)\n  }\n\n  Studio.addToolbarComponent(LogoutSettingsButton, 'settings')\n  Studio.addToolbarComponent(ChangePasswordSettingsButton, 'settings')\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./main_dev.js\n **/","module.exports = Studio.runtime['regenerator'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['regenerator']\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/asyncToGenerator'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/asyncToGenerator']\"\n ** module id = 2\n ** module chunks = 0\n **/","import React, { Component } from 'react'\r\nimport ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class DataEditor extends Component {\r\n  static propTypes = {\r\n    entity: React.PropTypes.object.isRequired,\r\n    onUpdate: React.PropTypes.func.isRequired\r\n  }\r\n\r\n  componentDidMount () {\r\n    if (this.props.entity.__isNew && !this.props.entity.password) {\r\n      Studio.openModal(ChangePasswordModal, { entity: this.props.entity })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { entity } = this.props\r\n\r\n    return <div className='custom-editor'>\r\n      <h1><i className='fa fa-user' /> {entity.username}</h1>\r\n    </div>\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./UserEditor.js\n **/","module.exports = Studio.runtime['core-js/object/get-prototype-of'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['core-js/object/get-prototype-of']\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/classCallCheck'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/classCallCheck']\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/createClass'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/createClass']\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/possibleConstructorReturn'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/possibleConstructorReturn']\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = Studio.runtime['helpers/inherits'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.runtime['helpers/inherits']\"\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 9\n ** module chunks = 0\n **/","import React, {Component, PropTypes} from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ChangePasswordModal extends Component {\r\n  static propTypes = {\r\n    close: PropTypes.func.isRequired,\r\n    options: PropTypes.object.isRequired\r\n  }\r\n\r\n  constructor () {\r\n    super()\r\n    this.state = {}\r\n  }\r\n\r\n  async changePassword () {\r\n    const { entity } = this.props.options\r\n    const { close } = this.props\r\n\r\n    try {\r\n      let data = {\r\n        newPassword: this.refs.newPassword1.value\r\n      }\r\n\r\n      if (!Studio.authentication.user.isAdmin) {\r\n        data.oldPassword = this.refs.oldPassword.value\r\n      }\r\n\r\n      await Studio.api.post(`/api/users/${entity.shortid}/password`, { data: data })\r\n      this.refs.newPassword1.value = ''\r\n      this.refs.newPassword2.value = ''\r\n      close()\r\n    } catch (e) {\r\n      this.setState({ apiError: e.message })\r\n    }\r\n  }\r\n\r\n  validatePassword () {\r\n    this.setState(\r\n      {\r\n        passwordError: this.refs.newPassword2.value && this.refs.newPassword2.value !== this.refs.newPassword1.value,\r\n        apiError: null\r\n      })\r\n  }\r\n\r\n  render () {\r\n    return <div>\r\n      {Studio.authentication.user.isAdmin ? '' : <div className='form-group'>\r\n        <label>old password</label>\r\n        <input type='password' ref='oldPassword' />\r\n      </div>\r\n      }\r\n      <div className='form-group'>\r\n        <label>new password</label>\r\n        <input type='password' ref='newPassword1' />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>new password verification</label>\r\n        <input type='password' ref='newPassword2' onChange={() => this.validatePassword()} />\r\n      </div>\r\n      <div className='form-group'>\r\n        <span style={{color: 'red', display: this.state.passwordError ? 'block' : 'none'}}>password doesn't match</span>\r\n        <span style={{color: 'red', display: this.state.apiError ? 'block' : 'none'}}>{this.state.apiError}</span>\r\n      </div>\r\n      <div className='button-bar'>\r\n        <button className='button confirmation' onClick={() => this.changePassword()}>ok</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ChangePasswordModal.js\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 11\n ** module chunks = 0\n **/","import React, { Component } from 'react'\r\n\r\nexport default class LogoutSettingsButton extends Component {\r\n  render () {\r\n    return <div>\r\n      <div\r\n        onClick={() => this.refs.logout.click()} style={{ cursor: 'pointer' }}>\r\n        <form method='POST' action='/logout'>\r\n          <input ref='logout' type='submit' id='logoutBtn' style={{ display: 'none' }}/>\r\n        </form>\r\n        <i className='fa fa-power-off'/> Logout\r\n      </div>\r\n    </div>\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./LogoutSettingsButton.js\n **/","import ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default (props) => {\r\n  return Studio.authentication.user.isAdmin ? <span /> : <div>\r\n    <a\r\n      id='changePassword'\r\n      onClick={() => Studio.openModal(ChangePasswordModal, { entity: Studio.authentication.user })}\r\n      style={{cursor: 'pointer'}}><i className='fa fa-key'></i>\r\n      Change password\r\n    </a>\r\n  </div>\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ChangePasswordSettingsButton.js\n **/","import React, { Component } from 'react'\r\nimport ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ChangePasswordButton extends Component {\r\n  static propTypes = {\r\n    tab: React.PropTypes.object,\r\n    onUpdate: React.PropTypes.func.isRequired\r\n  }\r\n\r\n  render () {\r\n    if (!this.props.tab || !this.props.tab.entity || this.props.tab.entity.__entitySet !== 'users') {\r\n      return <span />\r\n    }\r\n\r\n    return <div>\r\n      <div\r\n        className='toolbar-button'\r\n        onClick={(e) => Studio.openModal(ChangePasswordModal, { entity: this.props.tab.entity })}>\r\n        <i className='fa fa-key' /> Change Password\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ChangePasswordButton.js\n **/"],"sourceRoot":""}